<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¿ í‚¤ ê°•í™”í•˜ê¸° (Firebase)</title>
    <link rel="stylesheet" href="style.css">

    <!-- 
      [ì˜¤ë¥˜ ìˆ˜ì •]
      Firebase SDK ìŠ¤í¬ë¦½íŠ¸ê°€ ì´ˆê¸°í™” ì½”ë“œë³´ë‹¤ *ë¨¼ì €* ë¡œë“œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
    -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-analytics.js"></script>

    <!-- [ì˜¤ë¥˜ ìˆ˜ì •] SDKê°€ ë¡œë“œëœ *í›„ì—* ì´ˆê¸°í™”ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. -->
    <script type="module">
        // Firebase config (ì œê³µí•´ì£¼ì‹  ì •ë³´)
        const firebaseConfig = {
          apiKey: "AIzaSyCKe3Nss6sUK5STIuU5En_CZpDLKD4LQjg",
          authDomain: "cookie-bg.firebaseapp.com",
          projectId: "cookie-bg",
          storageBucket: "cookie-bg.appspot.com", 
          messagingSenderId: "873733835679",
          appId: "1:873733835679:web:7cfac4d15415a612ac0baa",
          measurementId: "G-G05W6Z6QXP"
        };
        
        try {
            // ì´ì œ 'firebase' ê°ì²´ê°€ ì¡´ì¬í•˜ë¯€ë¡œ ì˜¤ë¥˜ê°€ ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
            window.firebaseApp = firebase.initializeApp(firebaseConfig);
            window.firebaseAuth = firebase.auth();
            window.firebaseDb = firebase.firestore();
            window.GoogleAuthProvider = new firebase.auth.GoogleAuthProvider();
            // console.log("Firebase initialized successfully");
        } catch (e) {
            console.error("Error initializing Firebase: ", e);
        }
    </script>

</head>
<body>

    <div id="sidebar-overlay"></div>

    <div id="main-game-ui">
        <!-- 1. ì™¼ìª½ íŒ¨ë„ (ì •ë³´) -->
        <div id="left-panel">
            <h2>ğŸª ì¥ì°©ì¤‘ì¸ ì¿ í‚¤</h2>
            <ol id="equipped-cookie-list">
                <li>(ë¹„ì–´ìˆìŒ)</li><li>(ë¹„ì–´ìˆìŒ)</li><li>(ë¹„ì–´ìˆìŒ)</li><li>(ë¹„ì–´ìˆìŒ)</li><li>(ë¹„ì–´ìˆìŒ)</li>
            </ol>
            <h2>âš”ï¸ ì¥ì°© ë¬´ê¸°</h2>
            <div id="equipped-weapon-display">(ì—†ìŒ)</div>
            
            <div id="player-stats">
                <p>CPS: <span id="sugar-per-time">0.000</span></p>
                <p>ì„¤íƒ•: <span id="sugar-count">1000</span></p>
                <p>ë°©ì§€ê¶Œ: <span id="protection-ticket-count">0</span></p>
            </div>
            
            <!-- ë¡œê·¸ì¸ UI -->
            <div id="auth-section">
                <div id="user-info">
                    <p><span id="user-name"></span>ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!</p>
                    <button id="logout-button">ë¡œê·¸ì•„ì›ƒ</button>
                </div>
                <button id="google-login-button">Google ë¡œê·¸ì¸</button>
            </div>
        </div>
        
        <!-- 2. ì¤‘ì•™ íŒ¨ë„ (ê°•í™”/ë½‘ê¸° íƒ­) -->
        <div id="center-panel">
            <div id="cookie-mode-buttons">
                <button id="strengthen-mode-button" class="mode-button">ì¼ë°˜ê°•í™”</button>
                <button id="star-strengthen-button" class="mode-button">ìŠ¤íƒ€ê°•í™”</button>
                <button id="gacha-mode-button" class="mode-button">ë½‘ê¸°</button>
            </div>

            <!-- 2-1. ì¼ë°˜ê°•í™” íŒ¨ë„ -->
            <div id="strengthen-panel">
                <div id="cookie-main-display">
                    <div id="cookie-visual"><img src="https://placehold.co/300x300/D2B48C/8B4513?text=COOKIE" alt="ì¿ í‚¤ ì´ë¯¸ì§€"></div>
                    <h2 id="cookie-name-display">ê¸°ë³¸ ì¿ í‚¤</h2>
                </div>
                <div id="strengthen-info">
                    <p>ê°•í™” ë¹„ìš©: <span id="cost-display">10</span>ê°œ</p>
                    <p>ì„±ê³µ í™•ë¥ : <span id="probability-display">100</span>%</p>
                    <p>ë³´í˜¸ ì‚¬ìš©: <span id="protection-use-count">0</span>/5</p>
                </div>
                <div id="action-buttons">
                    <input type="checkbox" id="protection-toggle-checkbox" class="hidden-checkbox">
                    <label for="protection-toggle-checkbox" id="protection-toggle-label" class="action-button-small">ë°©ì§€ê¶Œ (0)</label>
                    <button id="strengthen-button" class="action-button-large">ê°•í™”í•˜ê¸°!</button>
                    <button id="store-button" class="action-button-small">ì €ì¥</button>
                </div>
            </div>

            <!-- 2-2. ë½‘ê¸° íŒ¨ë„ -->
            <div id="gacha-panel">
                <h2>âš”ï¸ ì „íˆ¬ ì¿ í‚¤ ë½‘ê¸°</h2>
                <p>ì¿ í‚¤ë¥¼ ë½‘ì•„ ì „íˆ¬ì— í™œìš©í•˜ì„¸ìš”! (ë½‘ê¸° ë¹„ìš©: <span id="gacha-cost">1,000</span> ì„¤íƒ•)</p>
                <div id="gacha-buttons">
                    <button id="gacha-pull-1" class="gacha-button">1íšŒ ë½‘ê¸°</button>
                    <button id="gacha-pull-10" class="gacha-button">10íšŒ ë½‘ê¸°</button>
                </div>
                <div id="gacha-result"><p>ë½‘ê¸° ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...</p></div>
            </div>
        </div> 

        <!-- 3. ì˜¤ë¥¸ìª½ íŒ¨ë„ (ë©”ë‰´) -->
        <div id="right-panel">
            <button id="inventory-toggle-button" class="menu-button">ì¸ë²¤</button>
            <button id="shop-toggle-button" class="menu-button">ìƒì </button>
            <button id="ranking-toggle-button" class="menu-button">ë­í‚¹</button>
            <button id="trade-toggle-button" class="menu-button">ê±°ë˜</button>
            <button id="battle-button">ì „íˆ¬</button>
        </div>
    </div> <!-- #main-game-ui ë -->

    <!-- ì‚¬ì´ë“œë°” (ë­í‚¹ íƒ­ ìˆ˜ì •) -->
    <div id="main-sidebar">
        <button id="close-sidebar-button">X</button>
        <div id="sidebar-nav">
            <button id="inventory-tab-button" class="tab-button">ì¸ë²¤í† ë¦¬</button>
            <button id="shop-tab-button" class="tab-button">ìƒì </button>
            <button id="ranking-tab-button" class="tab-button">ë­í‚¹</button>
            <button id="trade-tab-button" class="tab-button">ê±°ë˜</button>
        </div>
        <div id="sidebar-content-container">
            <!-- 1. ì¸ë²¤í† ë¦¬ íƒ­ -->
            <div id="inventory-tab-content" class="tab-content">
                <h3>ğŸª ì¥ì°©ì¤‘ì¸ ì¿ í‚¤ (<span id="equipped-count">0</span>/5)</h3>
                <div id="equipped-slots" class="item-list"></div>
                <h3>ğŸ“¦ ê°•í™” ì¿ í‚¤ (ë³´ê´€í•¨)</h3>
                <div id="inventory-list" class="item-list"></div>
                <h3>âš”ï¸ ì „íˆ¬ ì¿ í‚¤ (ë³´ê´€í•¨)</h3>
                <div id="battle-cookie-list" class="item-list"></div>
            </div>
            <!-- 2. ìƒì  íƒ­ -->
            <div id="shop-tab-content" class="tab-content">
                <h3>ğŸ›’ ìƒì </h3>
                <div class="item-list">
                    <div class="shop-item">
                        <span>ğŸ›¡ï¸ ì‹¤íŒ¨ ë°©ì§€ê¶Œ (1íšŒ)</span>
                        <button id="buy-protection-ticket" class="purchase-button">êµ¬ë§¤ (ì„¤íƒ• 100,000)</button>
                    </div>
                    <div class="shop-item">
                        <span>ğŸš€ +10 ì›Œí”„ê¶Œ</span>
                        <button id="buy-warp-ticket" class="purchase-button">êµ¬ë§¤ (ì„¤íƒ• 10,000)</button>
                    </div>
                </div>
            </div>
            <!-- 3. ë­í‚¹ íƒ­ -->
            <div id="ranking-tab-content" class="tab-content">
                <h3>ğŸ† ìµœê³  ë ˆë²¨ ë­í‚¹ (Top 20)</h3>
                <ol id="ranking-list"></ol>
            </div>
            <!-- 4. ê±°ë˜ íƒ­ -->
            <div id="trade-tab-content" class="tab-content">
                <h3>ğŸ¤ ê±°ë˜ (ê°œë°œ ì¤‘)</h3>
                <p>Firebase ì—°ë™ ì˜ˆì •ì…ë‹ˆë‹¤.</p>
            </div>
        </div>
    </div>
    
    <!-- ì „íˆ¬ UI -->
    <div id="battle-ui">
        <h1>ì „íˆ¬ ì¤‘...</h1>
        <p><span id="battle-weapon-name"></span>(ìœ¼)ë¡œ ì ì„ ìƒëŒ€í•˜ë©° ìƒìë¥¼ íŒŒë°í•©ë‹ˆë‹¤.</p>
        <button id="battle-exit-button">ëŒì•„ê°€ê¸°</button>
    </div>

    <!-- [ìˆ˜ì •] script.jsëŠ” ëª¨ë“  HTMLì´ ë¡œë“œëœ í›„ ë§ˆì§€ë§‰ì— ìœ„ì¹˜ -->
    <script src="script.js"></script> 
</body>
</html>
